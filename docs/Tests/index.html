<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Writing and running tests</title><meta name="description" content="Documentation for Writing and running tests"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><style>.container {
  padding: 0 2rem;
}

.tsd-page-toolbar {
  border: 0;
}

.container-main {
  padding: 4.8rem 0 0;
  height: 100vh;
  box-sizing: border-box;
  overflow: hidden;
}

.tsd-navigation.settings .tsd-accordion-details {
  padding: 1rem;
  background: var(--color-background-secondary);
}

.tsd-navigation.settings {
  display: inline-block;
  vertical-align: top;
}

.secondary.secondary {
  display: none;
}

.module.current .current .secondary.secondary {
  display: block;
}

.tsd-navigation.settings .tsd-index-accordion {
  position: relative;
}

.tsd-navigation.settings .tsd-accordion-summary {
  display: inline-flex;
  vertical-align: top;
  align-items: center;
  margin-left: 1rem;
}

.col-menu,
.col-content {
  position: static;
  margin: 0;
  height: 100%;
  box-sizing: border-box;
}

.col-menu {
  flex: 0 0 24rem;
  border-left: 0;
  padding-left: 1rem;
  padding-right: 0.1rem;
  background-color: lightgrey;
}

.tsd-toolbar-contents {
  background-color: lightsteelblue;
}

.col-content {
  padding-top: 1rem;
  padding-left: 1rem;
  padding-right: 1rem;
  overflow-x: hidden;
  flex: 1;
}

.menu-item-desc {
  color: #5d5d5d;
  font-size: 12px;
  line-height: 1.26;
  font-weight: normal;
}

:root[data-theme='dark'] .menu-item-desc {
  color: #989898;
}

@media (prefers-color-scheme: dark) {
  .menu-item-desc {
    color: #989898;
  }
}

a.tsd-index-link {
  align-items: flex-start;
  font-size: 0.9rem;
}

pre {
  border: 0;
}

.tsd-signature {
  background: var(--code-background);
  border: 0;
}

code.tsd-tag {
  border: 0;
}

#tsd-search.has-focus .tsd-navigation.settings {
  visibility: hidden;
}

.tsd-navigation.primary ul li li a {
  margin-left: 0.5rem;
  padding-top: 0.2rem;
  padding-bottom: 0.2rem;
}

.title {
  font-size: x-large;
}

.h1,
.h2 {
  font-size: large;
}

.tsd-breadcrumb,
.tsd-index-heading,
.tsd-sources {
  display: none;
}

.container {
  max-width: none;
}

.ts-kind-module {
  padding: 0;
  margin: 0
}

#tsd-sidebar-links {
  background-color:cornsilk;
  padding-top: 8px;
  padding-bottom: 8px;
  clear: both;
}

#tsd-sidebar-links a {
  display: inline;
  padding: 32px;
}

.ts-flagConst {
  display: none;
}

.tsd-hierarchy, .tsd-index-accordion {
  display: none;
}

.tsd-kind-icon, .tsd-parameters, .tsd-returns-title {
  display: none;
}

.tsd-kind-function {
  padding-top: 0;
}</style></head><body><script>console.log(`Loaded ${location.href}`);</script><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script>
<div class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container"><a href="index.html" class="title">OASys Testing with Cypress</a></div>
<div id="tsd-sidebar-links" class="tsd-navigation"><a href="../index.html">Introduction</a><a href="index.html">Writing and running tests</a><a href="../Library/index.html">Library</a><a href="../OffenderLib/index.html">Offenders</a><a href="../Pages/index.html">Pages</a><a href="../Users/index.html">Users</a><a href="../Classes/index.html">Classes</a><a href="../Types/index.html">Types</a></div></div>
<div class="container container-main">
<div class="col-menu menu-sticky-wrap menu-highlight">
<nav class="tsd-navigation primary">
<h2>Writing and running tests</h2>
<div class="tsd-accordion-details">
<ul class="modules">
<li class="current selected module">
<ul></ul></li></ul></div></nav></div>
<div class="col-content">
<div class="tsd-page-title">
<h2>Writing and running tests</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#writing-tests" id="writing-tests" style="color: inherit; text-decoration: none;">
  <h3>Writing tests</h3>
</a>
<p>Tests should be created in the <code>oasys\tests</code> folder, with subfolders to group regression tests and those relating to specific NODs or releases.  There is also an <code>oasys\tests\local</code> folder for tests which are not going to be shared with others (scratchpad tests) - these will not be copied to the main Git repository.</p>
<p>The following basic test contains the minimum code required in most or all test scripts:</p>
<blockquote>
<p><code>import * as oasys from &#39;oasys&#39;</code>  </p>
<p><code>describe(&#39;This is a sample test&#39;, () =&gt; {</code>  </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<code>it(&#39;Just log in&#39;, () =&gt; {</code><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>oasys.login(oasys.Users.admin, &#39;Bedfordshire&#39;)</code><br>&nbsp;&nbsp;&nbsp;&nbsp;<code>})</code><br><code>}</code>  </p>
</blockquote>
<p>Key parts of this are:</p>
<p>1 - <code>import</code> - provide access to the OASys test library<br>2 - <code>describe</code> - the &#39;container&#39; for a test, including the top-level description<br>3 - <code>it</code> - this part contains the actual test, again there is a high-level description</p>
<p>Other sections can be included (for example more than one <code>it</code>, <code>beforeEach</code> - see Cypress documentation) but generally the above structure will suffice.</p>

<a href="#running-tests" id="running-tests" style="color: inherit; text-decoration: none;">
  <h3>Running tests</h3>
</a>
<p>Tests can be run from the command line, using either <code>cypress run</code> or <code>cypress open</code>.  The <code>open</code> command gives a more interactive Cypress interface which can be used to select tests to run and view the results step by step; you can also continue interacting with OASys in the same session at the end of a test script.  The <code>run</code> command on the other hand will normally run tests on a headless (i.e. invisible) browser, and generate a test report.  See the <a href="https://docs.cypress.io/guides/guides/command-line">Cypress docs</a> for details.</p>
<p>To make this easier, a custom VS Code extension is provided (see the setup guide on SharePoint (<code>OASys\Autotest</code>) for installation instructions).  This is used by right-clicking on a test or test folder in the VS Code explorer pane, or on the tab at the top of an open test.  The following options can then be selected from the menu:</p>
<ul>
<li><code>Run test in Cypress</code> - this will be similar to the <code>open</code> command, so you can watch a test&#39;s progress and continue the OASys session</li>
<li><code>Run test in Cypress (headless browser)</code> - using the <code>run</code> command as described above.</li>
</ul>

<a href="#reporting-and-logging" id="reporting-and-logging" style="color: inherit; text-decoration: none;">
  <h3>Reporting and logging</h3>
</a>
<p><code>Cypress open</code> will show an interactive report, but this cannot be saved.  <code>Cypress run</code> will generate a report for each run, this can be found at <code>report\index.html</code> in your Cypress project folder.  Any previous report will be cleared out at the start of each run.</p>
<p>Two of the standard Cypress commands have been extended to write to the report:</p>
<ul>
<li><code>cy.log(message)</code> - writes a time-stamped message to the report (also writes to the interactive report used by <code>cypress open</code>)</li>
<li><code>cy.screenshot(optional filename)</code> - writes a screenshot to the report.  The filename can be specified or left blank (if blank a sequential name is generated).  The filename can also be set to <code>&#39;TIMESTAMP&#39;</code> to use the current date-time as the filename.</li>
</ul>
<p>The following can also be used to improve presentation on the report by grouping logs under a heading:</p>
<ul>
<li><code>cy.groupedLogStart(heading)</code> - starts a grouped log with the heading and a timestamp</li>
<li><code>cy.groupdLog(message)</code> - adds a line to the group (no timestamp)</li>
<li><code>cy.groupedLogEnd()</code> - ends the group and writes it to the log</li>
</ul>
<p>Most of the library functions use <code>cy.log</code> to report on test progress, so additional logging may not always be necessary.</p>
</div></div></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>